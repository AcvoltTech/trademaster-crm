<!DOCTYPE html>
<html lang="es">
  <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Trade Master CRM - Sistema Multi-Empresa</title>
      <link rel="stylesheet" href="styles.css">
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBnV9KDtKVFqk8RoKp1dGMXJ97G_d7Ks_I"></script>
  </head>
<body>
      <!-- AUTHENTICATION PAGE -->
      <div id="authPage" class="auth-container">
                <div class="auth-wrapper">
                              <div class="auth-left">
                                                <div class="auth-logo">
                                                                      <div class="logo-icon">锔</div>div>
                                                                      <h1>Trade Master</h1>
                                                                    <p>CRM HVACR - Sistema Multi-Empresa</p>
                                                </div>div>
                              </div>div>
                
                            <div class="auth-right">
                                            <div class="auth-tabs">
                                                                <button class="tab-btn active" onclick="switchTab('login')">Iniciar Sesi贸n</button>button>
                                                                <button class="tab-btn" onclick="switchTab('register')">Registrar Empresa</button>button>
                                            </div>div>
                            
                                            <!-- LOGIN FORM -->
                                            <div id="loginForm" class="auth-form active">
                                                                <h2>Bienvenido</h2>
                                                                <form onsubmit="handleLogin(event)">
                                                                                        <div class="form-group">
                                                                                                                    <label>Email</label>
                                                                                                                    <input type="email" id="loginEmail" placeholder="Email" required>
                                                                                          </div>div>
                                                                                        <div class="form-group">
                                                                                                                    <label>Contrase帽a</label>
                                                                                                                    <input type="password" id="loginPassword" placeholder="Contrase帽a" required>
                                                                                          </div>div>
                                                                                        <button type="submit" class="btn-primary">Iniciar Sesi贸n</button>button>
                                                                </form>form>
                                                                <p class="form-hint">驴Olvidaste tu contrase帽a? <a href="#">Click aqu铆</a>a></p>
                                            </div>div>
                            
                                            <!-- REGISTER FORM -->
                                            <div id="registerForm" class="auth-form">
                                                                <h2>Crear Cuenta Empresarial</h2>
                                                                <form onsubmit="handleRegister(event)">
                                                                                        <div class="form-group">
                                                                                                                    <label>Nombre de la Empresa *</label>
                                                                                                                    <input type="text" id="companyName" placeholder="Nombre de la Empresa" required>
                                                                                          </div>div>
                                                                                        <div class="form-row">
                                                                                                                    <div class="form-group">
                                                                                                                                                    <label>Nombre *</label>
                                                                                                                                                    <input type="text" id="firstName" placeholder="Nombre" required>
                                                                                                                      </div>div>
                                                                                                                    <div class="form-group">
                                                                                                                                                    <label>Apellido *</label>
                                                                                                                                                    <input type="text" id="lastName" placeholder="Apellido" required>
                                                                                                                      </div>div>
                                                                                          </div>div>
                                                                                        <div class="form-group">
                                                                                                                    <label>Email *</label>
                                                                                                                    <input type="email" id="registerEmail" placeholder="Email" required>
                                                                                          </div>div>
                                                                                        <div class="form-group">
                                                                                                                    <label>Tel茅fono</label>
                                                                                                                    <input type="tel" id="phone" placeholder="(555) 123-4567">
                                                                                          </div>div>
                                                                                        <div class="form-group">
                                                                                                                    <label>Contrase帽a *</label>
                                                                                                                    <input type="password" id="registerPassword" placeholder="Contrase帽a" required>
                                                                                          </div>div>
                                                                                        <div class="form-group">
                                                                                                                    <label>Confirmar Contrase帽a *</label>
                                                                                                                    <input type="password" id="confirmPassword" placeholder="Confirmar Contrase帽a" required>
                                                                                          </div>div>
                                                                                        <button type="submit" class="btn-primary">Crear Cuenta Empresarial</button>button>
                                                                </form>form>
                                            </div>div>
                            </div>div>
                </div>div>
      </div>div>

    <!-- DASHBOARD PAGE -->
    <div id="dashboardPage" class="dashboard-container" style="display: none;">
            <!-- SIDEBAR NAVIGATION -->
            <div class="sidebar">
                        <div class="sidebar-header">
                                        <div class="logo">
                                                            <div class="logo-icon">锔</div>div>
                                                            <h2>Trade Master</h2>
                                        </div>div>
                        </div>div>
            
                        <nav class="sidebar-nav">
                                        <div class="nav-section">
                                                            <h3>Principales</h3>
                                                            <a href="#" class="nav-link active" onclick="showSection('dashboard')">
                                                                                    <span class="nav-icon"></span>span>
                                                                                    <span>Dashboard</span>
                                                            </a>a>
                                                            <a href="#" class="nav-link" onclick="showSection('clients')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Clientes</span>
                                                            </a>a>
                                                            <a href="#" class="nav-link" onclick="showSection('jobs')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Trabajos</span>
                                                            </a>a>
                                        </div>div>
                        
                                        <div class="nav-section">
                                                            <h3>Ventas</h3>
                                                            <a href="#" class="nav-link" onclick="showSection('leads')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Leads</span>
                                                            </a>a>
                                                            <a href="#" class="nav-link" onclick="showSection('dispatch')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Dispatch</span>
                                                            </a>a>
                                        </div>div>
                        
                                        <div class="nav-section">
                                                            <h3>Operaciones</h3>
                                                            <a href="#" class="nav-link" onclick="showSection('technicians')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>T茅cnicos</span>
                                                            </a>a>
                                                            <a href="#" class="nav-link" onclick="showSection('invoices')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Facturas</span>
                                                            </a>a>
                                                            <a href="#" class="nav-link" onclick="showSection('collections')">
                                                                                    <span class="nav-icon"></span>
                                                                                    <span>Cobranza</span>
                                                            </a>a>
                                        </div>div>
                        
                                        <div class="nav-section">
                                                            <h3>Configuraci贸n</h3>
                                                            <a href="#" class="nav-link" onclick="showSection('settings')">
                                                                                    <span class="nav-icon">锔</span>
                                                                                    <span>Configuraci贸n</span>
                                                            </a>a>
                                        </div>div>
                        </nav>nav>
            
                        <div class="sidebar-footer">
                                        <button onclick="logout()" class="btn-logout">Cerrar Sesi贸n</button>button>
                        </div>div>
            </div>div>
    
            <!-- MAIN CONTENT -->
            <div class="main-content">
                        <!-- TOP BAR -->
                        <div class="top-bar">
                                        <div class="top-bar-left">
                                                            <h1 id="pageTitle">Dashboard</h1>
                                        </div>div>
                                        <div class="top-bar-right">
                                                            <div class="company-info">
                                                                                    <span id="companyDisplay" class="company-name"></span>
                                                            </div>div>
                                                            <div class="user-menu">
                                                                                    <div class="user-avatar" onclick="toggleUserMenu()">
                                                                                                                <span id="userInitials"></span>
                                                                                      </div>div>
                                                            </div>div>
                                        </div>div>
                        </div>div>
            
                        <!-- PAGE CONTENT -->
                        <div class="content-area">
                                        <!-- DASHBOARD SECTION -->
                                        <div id="dashboard-section" class="section active">
                                                            <div class="dashboard-grid">
                                                                                    <div class="kpi-card">
                                                                                                                <div class="kpi-header">Ingresos Este Mes</div>div>
                                                                                                                <div class="kpi-value">$0</div>div>
                                                                                                                <div class="kpi-subtext">+0% vs mes anterior</div>div>
                                                                                      </div>div>
                                                                                    <div class="kpi-card">
                                                                                                                <div class="kpi-header">Trabajos Completados</div>div>
                                                                                                                <div class="kpi-value">0</div>div>
                                                                                                                <div class="kpi-subtext">Este mes</div>div>
                                                                                      </div>div>
                                                                                    <div class="kpi-card">
                                                                                                                <div class="kpi-header">Clientes Activos</div>div>
                                                                                                                <div class="kpi-value">0</div>div>
                                                                                                                <div class="kpi-subtext">Total</div>div>
                                                                                      </div>div>
                                                                                    <div class="kpi-card">
                                                                                                                <div class="kpi-header">Leads Pendientes</div>div>
                                                                                                                <div class="kpi-value" id="leadCountKPI">0</div>div>
                                                                                                                <div class="kpi-subtext">Pr贸ximos 30 d铆as</div>div>
                                                                                      </div>div>
                                                            </div>div>
                                        
                                                            <div class="dashboard-row">
                                                                                    <div class="card">
                                                                                                                <h3>Trabajos Recientes</h3>
                                                                                                                <div class="empty-state">No hay trabajos registrados</div>div>
                                                                                      </div>div>
                                                                                    <div class="card">
                                                                                                                <h3>Actividad</h3>
                                                                                                                <div class="empty-state">Sin actividad reciente</div>div>
                                                                                      </div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- CLIENTS SECTION -->
                                        <div id="clients-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Gesti贸n de Clientes</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('clientForm')">+ Nuevo Cliente</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay clientes registrados. Crea uno para comenzar.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- JOBS SECTION -->
                                        <div id="jobs-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Gesti贸n de Trabajos</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('jobForm')">+ Nuevo Trabajo</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay trabajos registrados. Crea uno para comenzar.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- LEADS SECTION WITH GOOGLE MAPS -->
                                        <div id="leads-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Gesti贸n de Leads - Mapa de Ubicaciones</h3>
                                                                                                                <button class="btn-primary" onclick="showLeadForm()">+ Nuevo Lead</button>button>
                                                                                      </div>div>
                                                            </div>div>
                                        
                                                            <!-- LEADS FORM -->
                                                            <div id="leadFormContainer" class="card" style="display:none; margin-top: 20px;">
                                                                                    <h3>Crear Nuevo Lead</h3>
                                                                                    <form id="leadForm" onsubmit="handleLeadCreate(event)">
                                                                                                                <div class="form-row">
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Nombre del Cliente *</label>
                                                                                                                                                                                    <input type="text" id="leadName" placeholder="Nombre completo" required>
                                                                                                                                                  </div>div>
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Tel茅fono *</label>
                                                                                                                                                                                    <input type="tel" id="leadPhone" placeholder="(555) 123-4567" required>
                                                                                                                                                  </div>div>
                                                                                                                  </div>div>
                                                                                    
                                                                                                                <div class="form-row">
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Email</label>
                                                                                                                                                                                    <input type="email" id="leadEmail" placeholder="email@example.com">
                                                                                                                                                  </div>div>
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Tipo de Servicio *</label>
                                                                                                                                                                                    <select id="leadService" required>
                                                                                                                                                                                                                            <option value="">Seleccionar...</option>option>
                                                                                                                                                                                                                            <option value="installation">Instalaci贸n de HVAC</option>option>
                                                                                                                                                                                                                            <option value="repair">Reparaci贸n</option>option>
                                                                                                                                                                                                                            <option value="maintenance">Mantenimiento</option>option>
                                                                                                                                                                                                                            <option value="emergency">Emergencia</option>option>
                                                                                                                                                                                                                        </select>select>
                                                                                                                                                  </div>div>
                                                                                                                  </div>div>
                                                                                    
                                                                                                                <div class="form-group">
                                                                                                                                                <label>Direcci贸n *</label>
                                                                                                                                                <input type="text" id="leadAddress" placeholder="Calle, n煤mero, ciudad" required>
                                                                                                                  </div>div>
                                                                                    
                                                                                                                <div class="form-row">
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Latitud</label>
                                                                                                                                                                                    <input type="number" id="leadLat" placeholder="Auto-detectado" step="0.000001" readonly>
                                                                                                                                                  </div>div>
                                                                                                                                                <div class="form-group">
                                                                                                                                                                                    <label>Longitud</label>
                                                                                                                                                                                    <input type="number" id="leadLng" placeholder="Auto-detectado" step="0.000001" readonly>
                                                                                                                                                  </div>div>
                                                                                                                  </div>div>
                                                                                    
                                                                                                                <div class="form-group">
                                                                                                                                                <label>Notas</label>
                                                                                                                                                <textarea id="leadNotes" placeholder="Detalles adicionales..." rows="3"></textarea>
                                                                                                                  </div>div>
                                                                                    
                                                                                                                <div class="form-row">
                                                                                                                                                <button type="submit" class="btn-primary">Guardar Lead</button>button>
                                                                                                                                                <button type="button" class="btn-secondary" onclick="hideLeadForm()">Cancelar</button>button>
                                                                                                                  </div>div>
                                                                                      </form>form>
                                                            </div>div>
                                        
                                                            <!-- GOOGLE MAP -->
                                                            <div class="card" style="padding: 0; overflow: hidden; margin-top: 20px;">
                                                                                    <div id="leadsMap" style="width: 100%; height: 500px;"></div>div>
                                                            </div>div>
                                        
                                                            <!-- LEADS LIST -->
                                                            <div class="card" style="margin-top: 20px;">
                                                                                    <h3>Lista de Leads Registrados</h3>
                                                                                    <div id="leadsList" class="leads-table-container">
                                                                                                                <div class="empty-state">No hay leads registrados. Crea uno para comenzar.</div>div>
                                                                                      </div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- DISPATCH SECTION -->
                                        <div id="dispatch-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Dispatch - Asignaci贸n de Trabajos</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('dispatchForm')">+ Asignar Trabajo</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay asignaciones. Asigna trabajos a tus t茅cnicos.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- TECHNICIANS SECTION -->
                                        <div id="technicians-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Gesti贸n de T茅cnicos</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('technicianForm')">+ Nuevo T茅cnico</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay t茅cnicos registrados. Agrega uno para comenzar.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- INVOICES SECTION -->
                                        <div id="invoices-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Gesti贸n de Facturas</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('invoiceForm')">+ Nueva Factura</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay facturas. Crea una para comenzar.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- COLLECTIONS SECTION -->
                                        <div id="collections-section" class="section">
                                                            <div class="card">
                                                                                    <div class="card-header">
                                                                                                                <h3>Cr茅dito & Cobranza</h3>
                                                                                                                <button class="btn-primary" onclick="showModal('collectionForm')">+ Nuevo Cobro</button>button>
                                                                                      </div>div>
                                                                                    <div class="empty-state">No hay cobros registrados.</div>div>
                                                            </div>div>
                                        </div>div>
                        
                                        <!-- SETTINGS SECTION -->
                                        <div id="settings-section" class="section">
                                                            <div class="card">
                                                                                    <h3>Configuraci贸n de la Empresa</h3>
                                                                                    <div class="settings-form">
                                                                                                                <div class="form-group">
                                                                                                                                                <label>Nombre de la Empresa</label>
                                                                                                                                                <input type="text" id="settingsCompanyName" placeholder="Nombre de la Empresa">
                                                                                                                  </div>div>
                                                                                                                <div class="form-group">
                                                                                                                                                <label>Tel茅fono</label>
                                                                                                                                                <input type="tel" id="settingsPhone" placeholder="Tel茅fono">
                                                                                                                  </div>div>
                                                                                                                <div class="form-group">
                                                                                                                                                <label>Email</label>
                                                                                                                                                <input type="email" id="settingsEmail" placeholder="Email">
                                                                                                                  </div>div>
                                                                                                                <button class="btn-primary" onclick="saveSettings()">Guardar Cambios</button>button>
                                                                                      </div>div>
                                                            </div>div>
                                        </div>div>
                        </div>div>
            </div>div>
    </div>div>

    <script src="script.js"></script>
</body>
</html>html></span></span></label></label></p></h1>
</body></title>
  </head>
